{"version":3,"sources":["_command.ion"],"names":["require","main","module","args","process","argv","slice","length","console","log","ModuleBuilder","chdir","watchValue","exit","e","error","stack","global","ion","File","compiler","arg","file","exists","Error","code","read","js","compile","eval"],"mappings":"aAAA;AAEA,IAAGA,OAAA,CAAQC,IAAR,KAAkBC,MAArB,EACA;AAAA,IAAI,OAAJ;AAAA,CAHA;AAKA,IAAIC,IAAA,GAAOC,OAAA,CAAQC,IAAR,CAAaC,KAAb,CAAmB,CAAnB,CAAX,CALA;AAMA,IAAGH,IAAA,CAAKI,MAAL,KAAe,CAAf,IAAoBJ,IAAA,CAAK,CAAL,MAAW,QAAlC,EACA;AAAA,IAAIK,OAAA,CAAQC,GAAR,C,gKAAA,EAAJ;AAAA,IAOI,OAPJ;AAAA,CAPA;AAgBA,IAAIC,aAAA,G,OAAgB,CAAO,0BAAP,CAApB,CAhBA;AAiBA,IAAGP,IAAA,CAAK,CAAL,M,IAAA,IAAmBA,IAAA,CAAK,CAAL,M,IAAtB,EACA;AAAA,IAAI,IAAGA,IAAA,CAAK,CAAL,C,QAAH,EACJ;AAAA,QAAQC,OAAA,CAAQO,KAAR,CAAcR,IAAA,CAAK,CAAL,CAAd,EAAR;AAAA,KADA;AAAA,IAEI,IACJ;AAAA,QAAQO,aAAA,GAAgBE,UAAhB,GAAR;AAAA,QACQ,IAAGT,IAAA,CAAK,CAAL,M,IAAH,EACR;AAAA,YAAYC,OAAA,CAAQS,IAAR,GAAZ;AAAA,SAFA;AAAA,KADI,CAII,OAAEC,CAAF,EACR;AAAA,QAAQN,OAAA,CAAQC,GAAR,CAAY,wCAAZ,EAAR;AAAA,QACQD,OAAA,CAAQO,KAAR,CAAcD,CAAA,CAAEE,KAAhB,EADR;AAAA,QAEQZ,OAAA,CAAQS,IAAR,CAAa,CAAb,EAFR;AAAA,KAPA;AAAA,CADA,MAaA;AAAA,IAAII,MAAA,CAAOC,GAAP,G,OAAa,CAAO,KAAP,CAAb,CAAJ;AAAA,IACI,IAAIC,IAAA,G,OAAO,CAAO,QAAP,CAAX,CADJ;AAAA,IAEI,IAAIC,QAAA,G,OAAW,CAAO,aAAP,CAAf,CAFJ;AAAA,I,sBAGejB,I,eACf;AAAA,Q,IADQkB,G,GAAOlB,I,KACf;AAAA,QAAQ,IAAImB,IAAA,GAAO,IAAIH,IAAJ,CAASE,GAAT,CAAX,CAAR;AAAA,QACQ,IAAG,CAAIC,IAAA,CAAKC,MAAZ,EACR;AAAA,YAAY,MAAM,IAAIC,KAAJ,C,qBAA6BH,GAA7B,CAAN,CAAZ;AAAA,SAFA;AAAA,QAGQ,IAAII,IAAA,GAAOH,IAAA,CAAKI,IAAL,EAAX,CAHR;AAAA,QAIQ,IAAIC,EAAA,GAAKP,QAAA,CAASQ,OAAT,CAAiBH,IAAjB,CAAT,CAJR;AAAA,QAKQI,IAAA,CAAKF,EAAL,EALR;AAAA,KAJA;AAAA","sourcesContent":["#!/usr/bin/env node\n\nif require.main isnt module\n    return\n\nlet args = process.argv.slice(2)\nif args.length is 0 or args[0] is '--help'\n    console.log(\n        \"\"\n            Usage: ion -c | -w | file-to-run\n\n              -c   compiles the local module defined in package.json\n              -w   compiles the local module defined in package.json and watch\n    )\n    return\n\nlet ModuleBuilder = import '../builder/ModuleBuilder'\nif args[0] is \"-c\" or args[0] is \"-w\"\n    if args[1]?\n        process.chdir(args[1])\n    try\n        ModuleBuilder().watchValue()\n        if args[0] is \"-c\"\n            process.exit()\n    catch e\n        console.log('fuck you------------------------------')\n        console.error(e.stack)\n        process.exit(1)\nelse\n    # import ion into global namespace\n    global.ion = import('../')\n    let File = import('./File')\n    let compiler = import('../compiler')\n    for arg in args\n        let file = new File(arg)\n        if not file.exists\n            throw new Error(\"File not found: {{arg}}\")\n        let code = file.read()\n        let js = compiler.compile(code)\n        eval(js)\n"]}