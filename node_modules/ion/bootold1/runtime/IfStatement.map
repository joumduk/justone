{"version":3,"sources":["IfStatement.ion"],"names":["ion","Statement","IfStatement","properties","activate",{"type":"Identifier","name":"activate","loc":{"start":{"line":7,"column":8,"fixed":true,"source":"ion/runtime/IfStatement.ion"},"end":{"line":7,"column":16,"fixed":true,"source":"ion/runtime/IfStatement.ion"}}},"testExpression","context","createRuntime","test","watchValue","testExpressionWatcher","value","alternateStatement","isActive","deactivate","consequentStatement","consequent","alternate","unwatchValue"],"mappings":"aAAA;AAAA,IACIA,GAAA,G,OAAM,CAAO,KAAP,CADV,EAEIC,SAAA,G,OAAY,CAAO,aAAP,CAFhB;IAIaC,W;;QACTC,UAAA,EAAW;AAAA,YACPC,QAAA,EAAUC,YAClB;AAAA,gB,4BADQD,Q,uBACI,CAAZ;AAAA,gBACY,KAACE,cAAD,QAACA,c,WAAD,KAACA,c,GAAkB,KAACC,OAAD,CAASC,aAAT,CAAuB,KAACC,IAAxB,CAAnB,CADZ;AAAA,gBAEY,KAACH,cAAD,CAAgBI,UAAhB,CACI,KAACC,qBAAD,QAACA,qB,WAAD,KAACA,qB,YAAyB,UAACC,KAAD,EAC1C;AAAA,oBAAoB,IAAGA,KAAH,EACpB;AAAA,wBAAwB,IAAG,KAACC,kB,WAAD,KAACA,kBAAD,CAAqBC,Q,SAAxB,EACxB;AAAA,4BAA4B,KAACD,kB,WAAD,KAACA,kBAAD,CAAqBE,UAArB,E,SAAA,CAA5B;AAAA,4BAG4B,OAAO,KAACF,kBAAR,CAH5B;AAAA,yBADA;AAAA,wBAKwB,KAACG,mBAAD,QAACA,mB,WAAD,KAACA,mB,GAAuB,KAACT,OAAD,CAASC,aAAT,CAAuB,KAACS,UAAxB,CAAxB,CALxB;AAAA,wBAMwB,KAACD,mBAAD,CAAqBZ,QAArB,GANxB;AAAA,qBADoB,MASpB;AAAA,wBAAwB,IAAG,KAACY,mB,WAAD,KAACA,mBAAD,CAAsBF,Q,SAAzB,EACxB;AAAA,4BAA4B,KAACE,mB,WAAD,KAACA,mBAAD,CAAsBD,UAAtB,E,SAAA,CAA5B;AAAA,4BAC4B,OAAO,KAACC,mBAAR,CAD5B;AAAA,yBADA;AAAA,wBAGwB,IAAG,KAACE,S,QAAJ,EACxB;AAAA,4BAA4B,KAACL,kBAAD,QAACA,kB,WAAD,KAACA,kB,GAAsB,KAACN,OAAD,CAASC,aAAT,CAAuB,KAACU,SAAxB,CAAvB,CAA5B;AAAA,4BAC4B,KAACL,kBAAD,CAAoBT,QAApB,GAD5B;AAAA,yBAJA;AAAA,qBATA;AAAA,iB,OAFY,EAFZ;AAAA,aAFe;AAAA,YAsBPW,UAAA,EAAYV,YACpB;AAAA,gB,4BADQU,U,uBACI,CAAZ;AAAA,gBACY,KAACT,cAAD,CAAgBa,YAAhB,CAA6B,KAACR,qBAA9B,EADZ;AAAA,gBAEY,IAAG,KAACE,kB,WAAD,KAACA,kBAAD,CAAqBC,Q,SAAxB,EACZ;AAAA,oBAAgB,KAACD,kB,WAAD,KAACA,kBAAD,CAAqBE,UAArB,E,SAAA,CAAhB;AAAA,iBAHA;AAAA,gBAIY,IAAG,KAACC,mB,WAAD,KAACA,mBAAD,CAAsBF,Q,SAAzB,EACZ;AAAA,oBAAgB,KAACE,mB,WAAD,KAACA,mBAAD,CAAsBD,UAAtB,E,SAAA,CAAhB;AAAA,iBALA;AAAA,aAvBe;AAAA,S;OADkBd,S,EAJjC;2BAIaC,W","sourcesContent":["const\n    ion = import '../'\n    Statement = import './Statement'\n\nexport class IfStatement extends Statement\n    properties:\n        activate: ->\n            super\n            @testExpression ?= @context.createRuntime(@test)\n            @testExpression.watchValue(\n                @testExpressionWatcher ?= (value) =>\n                    if value\n                        if @alternateStatement?.isActive\n                            @alternateStatement?.deactivate()\n                            # we don't have to necessarily delete old statements\n                            # but behavior is more predictable this way\n                            delete @alternateStatement\n                        @consequentStatement ?= @context.createRuntime(@consequent)\n                        @consequentStatement.activate()\n                    else\n                        if @consequentStatement?.isActive\n                            @consequentStatement?.deactivate()\n                            delete @consequentStatement\n                        if @alternate?\n                            @alternateStatement ?= @context.createRuntime(@alternate)\n                            @alternateStatement.activate()\n            )\n        deactivate: ->\n            super\n            @testExpression.unwatchValue(@testExpressionWatcher)\n            if @alternateStatement?.isActive\n                @alternateStatement?.deactivate()\n            if @consequentStatement?.isActive\n                @consequentStatement?.deactivate()\n"]}