{"version":3,"sources":["immediateTemplates.ion"],"names":["ion","templates","a","b","Date","x","y","z","position","c","d","e","patch","test",{"type":"Identifier","name":"test","loc":{"start":{"line":131,"column":4,"fixed":true,"source":"ion/test/immediateTemplates.ion"},"end":{"line":131,"column":8,"fixed":true,"source":"ion/test/immediateTemplates.ion"}}},"templateType","args","expected","template","apply","reactiveResult","watcher","value","watchValue","JSON","stringify","console","log","unwatchValue"],"mappings":"aAAA;AAAA,IAAMA,GAAA,G,OAAM,CAAO,KAAP,CAAZ;AAEA,IAAMC,SAAA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQE,E;YACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACA;AAAA,gBAACC,CAAA,EAAE,CAAH;AAAA,gBAAKC,CAAA,EAAE,CAAP;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAMA,E;YACA;AAAA,gBAAC,CAAD;AAAA,gBAAG,CAAH;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAYA,E;YACA;AAAA,gBAAC,CAAD;AAAA,gBAAG,CAAH;AAAA,gBAAK,EAAL;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAMA,E;YACA;AAAA,gBAAC,CAAD;AAAA,gBAAG,CAAH;AAAA,gBAAK,CAAL;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAMA,E;YACA;AAAA,gBAAC,IAAD;AAAA,gBAAO,IAAP;AAAA,gBAAa,IAAb;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAKA,E;YACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAMA,E;YACA;AAAA,gBAAC,KAAD;AAAA,gBAAO,IAAP;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACA,IAAIC,IAAJ,CAAS,IAAT,EAAe,EAAf,EAAmB,CAAnB,C;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACA,K;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAUA,E;YACA;AAAA,gBAACC,CAAA,EAAE,CAAH;AAAA,gBAAMC,CAAA,EAAE,CAAR;AAAA,gBAAWC,CAAA,EAAE;AAAA,oBAAC,CAAD;AAAA,oBAAG,CAAH;AAAA,oBAAK,CAAL;AAAA,iBAAb;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACA;AAAA,gBAAC,CAAD;AAAA,gBAAI,CAAJ;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,CAAC;AAAA,oBAACL,CAAA,EAAE,CAAH;AAAA,oBAAKC,CAAA,EAAE,CAAP;AAAA,iBAAD,C;YACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAOI,YACZ;AAAA,oBAAgB,KAACK,QAAD,GAAY;AAAA,wBAACH,CAAA,EAAE,CAAH;AAAA,wBAAKC,CAAA,EAAE,CAAP;AAAA,qBAAZ,CAAhB;AAAA,iB;YACQ;AAAA,gBAACE,QAAA,EAAS;AAAA,oBAACH,CAAA,EAAE,EAAH;AAAA,oBAAMC,CAAA,EAAE,CAAR;AAAA,iBAAV;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAOI;AAAA,oBAACJ,CAAA,EAAE,CAAH;AAAA,oBAAKC,CAAA,EAAE,CAAP;AAAA,iB;gBACA;AAAA,oBAACM,CAAA,EAAE,CAAH;AAAA,oBAAKC,CAAA,EAAE,CAAP;AAAA,iB;;YACJ;AAAA,gBAACD,CAAA,EAAE,CAAH;AAAA,gBAAKC,CAAA,EAAE,CAAP;AAAA,gBAASC,CAAA,EAAE,CAAX;AAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGA,E;YACAX,GAAA,CAAIY,K;;KA7HZ,CAFA;AAiIO,IACHC,IAAA,G,QAAAA,I,GAAOC,YACX;AAAA,Q,sBAA8Cb,S;wBAAAA,S;gBAAjCc,Y;gBAAcC,I;gBAAMC,Q;gBAA0BA,Q,UAC3D;AAAA,gBAAY,IAAIC,QAAA,GAAWH,YAAA,CAAaI,KAAb,CAAmB,IAAnB,EAAyBH,IAAzB,CAAf,CAAZ;AAAA,gBACY,IAAII,cAAA,GAAiB,IAArB,CADZ;AAAA,gBAEY,IAAIC,OAAA,GAAUP,UAACQ,KAADR,E;2BAAWM,cAAA,GAAiBE,K;iBAA1C,CAFZ;AAAA,gBAGYJ,QAAA,CAASK,UAAT,CAAoBF,OAApB,EAHZ;AAAA,gBAIY,IACZ;AAAA,oB,KAAuB,CAAAD,cAAA,KAAkBH,QAAlB,IAA8BO,IAAA,CAAKC,SAAL,CAAeL,cAAf,MAAkCI,IAAA,CAAKC,SAAL,CAAeR,QAAf,CAAhE,C;wJAAvB;AAAA,iBADY,CAEI,OAAEN,CAAF,EAChB;AAAA,oBAAgBe,OAAA,CAAQC,GAAR,CAAYP,cAAZ,E,KAAA,EAAmCH,QAAnC,EAAhB;AAAA,oBACgB,MAAMN,CAAN,CADhB;AAAA,iBAPA;AAAA,gBAUYO,QAAA,CAASU,YAAT,CAAsBP,OAAtB,EAVZ;AAAA,gB,KAWmB,CAAAD,cAAA,KAAkB,MAAlB,C;uFAXnB;AAAA,a;SADA;AAAA,KAFO","sourcesContent":["const ion = import '../'\n\nconst templates = []\n    []\n        template ->\n            const\n                a = 1\n                b = 2\n                c = a + b\n            return c\n        []\n        3\n    []\n        template -> {a:1,b:2}\n        []\n        {a:1,b:2}\n    []\n        template ->\n            return []\n                1\n                2\n        []\n        [1,2]\n    []\n        template ->\n            let a = 1\n            let b = 2\n            return []\n                a\n                b\n                if a > b\n                    10\n                else if b > a\n                    20\n        []\n        [1,2,20]\n    []\n        template ->\n            let items = [1,2,3]\n            let x = [item + index for item, index in items]\n            return x\n        []\n        [1,3,5]\n    []\n        template ->\n            let items = {a:1,b:2,c:3}\n            let x = [key + value for key, value of items]\n            return x\n        []\n        ['a1', 'b2', 'c3']\n    []\n        template ->\n            let object = {a:{b:1}}\n            return object?.a?.b\n        []\n        1\n    []\n        template -> false ? 1 : 2\n        []\n        2\n    []\n        template -> null ? 2\n        []\n        2\n    []\n        template ->\n            let a = null\n            let b = 2\n            return [a?, b?]\n        []\n        [false,true]\n    []\n        template -> Math.min(1, 2)\n        []\n        1\n    []\n        template -> Math.min.call(null, 1, 2)\n        []\n        1\n    []\n        template -> new Date(2011, 10, 5)\n        []\n        new Date(2011, 10, 5)\n    []\n        template -> /foo/\n        []\n        /foo/\n    []\n        template ->\n            return\n                x: 1\n                y: 2\n                z: []\n                    let items = [3,2,1]\n                    for item in items\n                        item * 2\n        []\n        {x:1, y:2, z:[6,4,2]}\n    []\n        template -> [null ? 1, undefined ? 2]\n        []\n        [1, 2]\n    []\n        template ({a,b}) -> a + b\n        [{a:1,b:2}]\n        3\n    []\n        template (type) ->\n            return new type\n                position:\n                    x: 10\n        []\n            ->\n                @position = {x:1,y:2}\n        {position:{x:10,y:2}}\n    []\n        template (input, output) ->\n            output:\n                e: input.a + input.b\n            return output\n        []\n            {a:1,b:2}\n            {c:3,d:4}\n        {c:3,d:4,e:3}\n    []\n        template -> ion.patch\n        []\n        ion.patch\n\nexport const\n    test = ->\n        for [templateType, args, expected] in templates if expected?\n            let template = templateType.apply(this, args)\n            let reactiveResult = null\n            let watcher = (value) -> reactiveResult = value\n            template.watchValue(watcher)\n            try\n                assert reactiveResult is expected or JSON.stringify(reactiveResult) is JSON.stringify(expected)\n            catch e\n                console.log(reactiveResult, \"!==\", expected)\n                throw e\n\n            template.unwatchValue(watcher)\n            assert reactiveResult is undefined\n            # # also, call the template function imperatively and see that it's still the expected value\n            # let imperativeResult = templateType.apply(null, args)\n            # # console.log('imperativeResult: ', imperativeResult)\n            # assert JSON.stringify(imperativeResult) is JSON.stringify(expected)\n\n"]}