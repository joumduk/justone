void function(){var _ion_browser_require_=function(module,exports,require){var modules,normalize,require,resolve;null==this.global&&(this.global=function(){return this}()),null==this.require&&(require=function(e){var t,r,n,i,s;if("ion/browser/require"===e)return require;if(i=e,r=modules[e],r||("/"!==e[e.length-1]&&(e+="/"),e+="index",r=modules[e]),!r){for(s=e.replace(/\/index$/,"").split(/\//),n=this,t=0;null!=n&&t<s.length;)n=n[s[t]],t++;null!=n&&(r=modules[i]={exports:n})}if(!r)throw new Error("Couldn't find module for: "+e);return r.exports||(r.exports={},r.id=e,r.call(this,r,r.exports,resolve(e))),r.exports},modules={},normalize=require.normalize=function(e,t){var r,n,i;if(i=e.split("/"),n=void 0,"."!==t[0])return t;for(i.pop(),t=t.split("/"),r=0;r<t.length;)n=t[r],".."===n?i.pop():"."!==n&&i.push(n),++r;return i.join("/")},resolve=function(e){return function(t){return require(normalize(e,t))}},require.register=function(e,t){return modules[e]=t},require.loadAll=function(){var e,t;t=[];for(e in modules)t.push(require(e));return t},require.getModuleIds=function(){return Object.keys(modules)},require.runTests=function(e){var t;return t=function(){return require("ion/browser/tester").runTests(require.getModuleIds(),e)},null!=global.setTimeout?setTimeout(t,0):t()},require.compileScripts=function(){var compiledWrapper,compiler,ion,removeLastResult,result,scriptElement,template,_i,_len,_ref,_results;for(ion=require("ion"),compiler=require("ion/compiler"),_ref=document.querySelectorAll("script[type=ion]"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)scriptElement=_ref[_i],compiledWrapper=eval("(function(){ "+compiler.compile(scriptElement.innerHTML)+" })"),result=compiledWrapper.call(scriptElement),null!=result?(template=result.call(scriptElement),removeLastResult=null,_results.push(template.watchValue(function(e){return"function"==typeof removeLastResult&&removeLastResult(),removeLastResult=null,null!=e?removeLastResult=ion.add(scriptElement.parentElement,e):void 0}))):_results.push(void 0);return _results},"undefined"==typeof module?this.require=require:module.exports=require,null!=global.window&&window.addEventListener(global.Polymer?"polymer-ready":"load",function(){return require.compileScripts()}))};"function"==typeof require?require.register?require.register("ion/browser/require",_ion_browser_require_):_ion_browser_require_.call(this,module,exports,require):_ion_browser_require_.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("./"),i="$",s={};s[i]=n.patch(s[i],{visible:!1,type:"string"}),s.toJSON=function(){var e={};null!=this.constructor.id&&(e[this.constructor.typeKey]=this.constructor.id);var t=this;for(var r in t){var n=t[r];this.hasOwnProperty(r)&&(e[r]=n)}return e};var o=n.defineClass({name:"Object",constructor:function(e){if(null!=e)for(var t in e){var r=e[t],r=e[t];this[t]=r}},typeKey:i,is:function(e){return null!=e&&null!=e.constructor.types&&null!=e.constructor.types.has?e.constructor.types.has(this):void 0},properties:s,test:function(){var e=new o;if(!o.is(e))throw new Error("Assertion Failed: (Object.is(object))")}},null);e.exports=t=o};"function"==typeof require?require.register?require.register("ion/Object",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";for(var n=r("../"),i=function(){n.checkForChanges()},s={input:!0,select:!0,textarea:!0},o=["div","span","input","textarea","a","br","img","p","button","caption","fieldset","form","frame","frameset","h1","h2","h3","h4","h5","h6","hr","legend","menu","option","select","script","pre","table","tbody","td","tr","thead","canvas","head","meta","body","script","section","header","footer","article","ul","ol","li","label","strong"],a=function(e,t,r){var s=document.createElement(e);if(r&&n.add(s,i),null!=t)for(var o in t){var a=t[o];s.setAttribute(o,a)}return s},l=a,u=0;u<o.length;u++){var c=o[u];l[c]=function(e){return function(t){return a(e,t,s[e])}}(c)}e.exports=t=l};"function"==typeof require?require.register?require.register("ion/browser/element",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){Object.defineProperty(t,"element",{get:function(){return r("./element")},enumerable:!0}),Object.defineProperty(t,"require",{get:function(){return r("./require")},enumerable:!0}),Object.defineProperty(t,"tester",{get:function(){return r("./tester")},enumerable:!0})};"function"==typeof require?require.register?require.register("ion/browser/index",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){var n,i,s,o,a,l,u,c,h,p,f,v,d,m;if(c=function(e,t,r){var n,i,s,o,a;if(i=[],"object"==typeof t)for(s in t)a=t[s],i=i.concat(c(e+" "+s,a,r));else if("function"==typeof t&&/^\s*function\s*[a-zA-Z_0-9]*\s*\(\s*(done)?\s*\)/.test(t.toString())){i.push(e);try{1===t.length?t(function(t,n){return r(e,t,n)}):(o=t(),r(e,null,o))}catch(l){n=l,r(e,n,null)}}return i},t.spawnTests=p=function(e){var t;t="node"+("win32"===process.platform?".cmd":"")+" "+__filename+" "+e,r("../builder/utility").spawn(t)},t.runTests=h=function(e,n){var i,s,o,a,l,u,h,p,f,v,d,m,b,y,g,w,x;if(!e)throw new Error("moduleIds is required");null==n&&(n=t.createCallback()),l={},y=null,h=function(e,t,r){var i;return l[e]=!0,n(e,t,r),null!=y&&(i=u(),0===i.length)?(clearTimeout(y),n()):void 0};for(f in e){d=e[f];try{for(v=r(d),m=Array.isArray(e)?d:f,i=c(m,v.test,h),w=0,x=i.length;x>w;w++)m=i[w],null==l[m]&&(l[m]=!1)}catch(E){o=E,h(d,o,null)}}return u=function(){var e;return function(){var t;t=[];for(m in l)e=l[m],e||t.push(m);return t}()},p=u(),0===p.length?n():(s=1e3,a="Timed out after "+s+" ms",g=void 0,b=function(){return function(){var e,t;for(p=u(),e=0,t=p.length;t>e;e++)m=p[e],n(m,a,g);return n()}}(this),null!=global.setTimeout?y=setTimeout(b,s):(a=void 0,g="Platform missing setTimeout",b()))},t.createCallback=function(e,t){var r,n,i,s,o,a,l,u,c,h,p,f,v,d,m,b,y,g,w;return null==t&&(t=null!=global.window),null==e&&(e=t?{red:'<span style="color:red;white-space:pre">',green:'<span style="color:green;white-space:pre">',blue:'<span style="color:blue;white-space:pre">',plain:"<span>",endColor:"</span>",log:function(e){return document.body.innerHTML+=e},beep:"",endLine:"<br>"}:{}),c=null!=(f=e.red)?f:"[31m",a=null!=(v=e.green)?v:"[32m",n=null!=(d=e.blue)?d:"[36m",i=null!=(m=e.endColor)?m:"[0m",u=null!=(b=e.plain)?b:"",r=null!=(y=e.beep)?y:"",l=null!=(g=e.log)?g:function(e){return console.log(e)},s=null!=(w=e.endLine)?w:"",p=0,o=0,h=null,function(e,t,f){var v,d,m,b,y,g,w,x;return null==h&&(h=(new Date).getTime()),null!=e?(p++,null!=t&&o++,v=null!=t?c:null!=f?n:u,l(v+e+": "+(null!=(w=null!=(x=null!=(g=null!=t?t.stack:void 0)?g:t)?x:f)?w:"")+i+s)):(d=(new Date).getTime(),b=d-h,m=p-o,l(s),v=m===p?a:c+r,l(v+(y=""+m+"/"+p+" Passed ("+b+" ms).")+i+s),global.document&&(document.title=y),l(s))}},t.test=function(){var e,t;e={equal:function(e,t){if(!e==t)throw new Error(""+e+" != "+t)}},t={alpha:function(){throw"Failure"},beta:function(){},charlie:function(){return"Return value"}},c("fail",function(){throw"Failure"},function(t,r,n){return e.equal(t,"fail"),e.equal(r,"Failure"),e.equal(n,null)}),c("pass",function(){},function(t,r,n){return e.equal(t,"pass"),e.equal(r,null),e.equal(n,null)}),c("warn",function(){return"warning"},function(t,r,n){return e.equal(t,"warn"),e.equal(r,null),e.equal(n,"warning")})},r.main===e){if(u=r("path"),n=process.argv.slice(2).map(function(e){return e.replace(/\\/g,"/")}),n.length<1)return void console.log("Usage: tester manifestFile");for(o=n[0],f=r("../builder/utility"),s=JSON.parse(f.read(o)),l={},m=s.files,v=0,d=m.length;d>v;v++)i=m[v],a=u.join(process.cwd(),u.dirname(o),i),l[i]=a;console.log("------------------------------------------------------"),h(l)}};"function"==typeof require?require.register?require.register("ion/browser/tester",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(){"use strict";null==Array.prototype.add&&Object.defineProperty(Array.prototype,"add",{value:Array.prototype.push}),null==Array.prototype.remove&&Object.defineProperty(Array.prototype,"remove",{value:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e],r=this.lastIndexOf(t);r>=0&&this.splice(r,1)}}}),null==Array.prototype.contains&&Object.defineProperty(Array.prototype,"contains",{value:function(e){return this.indexOf(e)>=0}})};"function"==typeof require?require.register?require.register("ion/es6/Array",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(){(function(){}).name||Object.defineProperty(Function.prototype,"name",{get:function(){var e=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:e}),e}})};"function"==typeof require?require.register?require.register("ion/es6/Function",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t){"use strict";function r(e){if(null!=e)throw new Error("Don't add items in the constructor, IE implementation of Set breaks this");var t={},r=[],n={get:function(e){return t[s(e)]},set:function(e,n){var i=s(e);return t.hasOwnProperty(i)||r.push(e),t[i]=n,n},has:function(e){var r=s(e);return t.hasOwnProperty(r)},"delete":function(e){var n=s(e);r.remove(e),delete t[n]},clear:function(){t={},r=[]},forEach:function(e,t){for(var n=0;n<r.length;n++){var i=r[n],s=this.get(i);e.call(t,s,i,this)}}};for(var i in n){var o=n[i];Object.defineProperty(this,i,{value:o})}}var n=0,i="_Map_id_",s=function(e){if(null==e)return String(e);if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"_"+e;var t=e[i];if(null==t){var r=Object.getOwnPropertyDescriptor(e,i);null!=r?t=r.value:(t=++n,Object.defineProperty(e,i,{value:t}))}return t};null==(null!=global.Map?global.Map.prototype.forEach:void 0)&&(global.window&&console.warn("Shimming Map"),global.Map=r);t.test=function(){var e=global.Map,t=new e;if(t.set("a",1),t.set("b",2),0!==Object.keys(t).length)throw new Error("Assertion Failed: (Object.keys(map).length is 0)");if(!t.has("a"))throw new Error("Assertion Failed: (map.has('a'))");if(t.has("c"))throw new Error("Assertion Failed: (not map.has('c'))");if(1!==t.get("a"))throw new Error("Assertion Failed: (map.get('a') is 1)");if(2!==t.get("b"))throw new Error("Assertion Failed: (map.get('b') is 2)");if(void 0!==t.get("c"))throw new Error("Assertion Failed: (map.get('c') is undefined)");var r={};if(t.set(r,"one"),0!==Object.keys(r).length)throw new Error("Assertion Failed: (Object.keys(mykey1).length is 0)");if("one"!==t.get(r))throw new Error('Assertion Failed: (map.get(mykey1) is "one")')}};"function"==typeof require?require.register?require.register("ion/es6/Map",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(){"use strict";null==Object.is&&Object.defineProperty(Object,"is",{value:function(e,t){return e===t?0===e?1/e===1/t:!0:e!==e&&t!==t}})};"function"==typeof require?require.register?require.register("ion/es6/Object",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t){"use strict";{var r=function(e,t){if(null!=t){var r={};for(var n in t)r[n]=e[n];return r}var i={};for(var n in e){var s=e[n];i[n]=s}return i},n=t.createShim=function(){var e=new Map,t=function(t,n,i){var s=e.get(t);if(null==s){var o={};o[i]=0,s={object:t,properties:{},all:0,clone:r(t,i?o:null),callbacks:[]},e.set(t,s)}null!=i?(s.properties[i]=null!=s.properties[i]?s.properties[i]:0,s.properties[i]++):s.all++,s.callbacks.push(n)},n=function(t,r,n){var i=e.get(t);null!=i&&(i.callbacks.remove(r),0===i.callbacks.length&&e.delete(t),null!=n?(i.properties[n]--,0===i.properties[n]&&delete i.properties[n]):i.all--)},i=function(e,t,r){var n=null,i=function(e,t,r,i){n=null!=n?n:[],n.push({type:e,name:t,oldValue:r,object:i})},s=function(){if(t.constructor===Object)if(e.hasOwnProperty(o)){var r=e[o];if(t.hasOwnProperty(o)){var n=t[o];Object.is(n,r)||i("update",o,r,t)}else void 0!==r&&i("delete",o,r,t)}else t.hasOwnProperty(o)&&i("add",o,void 0,t);else{var r=e[o],n=t[o];Object.is(n,r)||i("update",o,r,t)}};if(null!=r)for(var o in r)s(o);else{for(var o in e)s(o);for(var o in t)e.hasOwnProperty(o)||s(o)}return n};return t.checkForChanges=function(){for(var t=10,n=0;t>n;n++){var s=0,o=[];if(e.forEach(function(e){var t=e.all>0?null:e.properties,n=i(e.clone,e.object,t);null!=n&&(s++,e.clone=r(e.object,t),o.push([n,e.callbacks.slice(0),e]))}),0===s)return;for(var a=0;a<o.length;a++)for(var l=o[a],u=l[0],c=l[1],h=0;h<c.length;h++){var p=c[h];p(u)}}throw new Error("Circular Object.observe dependency")},{observe:t,unobserve:n}};t.test=function(){var e,t=n(),r=t.observe,i=t.unobserve,s={a:1,b:{c:2,d:3}},o=function(t){e=t};if(r(s,o),s.a=2,delete s.b,s.c=5,r.checkForChanges(),JSON.stringify(e)!==JSON.stringify([{type:"update",name:"a",oldValue:1,object:{a:2,c:5}},{type:"delete",name:"b",oldValue:{c:2,d:3},object:{a:2,c:5}},{type:"add",name:"c",object:{a:2,c:5}}]))throw new Error('Assertion Failed: (JSON.stringify(changes) is JSON.stringify([{"type":"update","name":"a","oldValue":1,"object":{"a":2,"c":5}},{"type":"delete","name":"b","oldValue":{"c":2,"d":3},"object":{"a":2,"c":5}},{"type":"add","name":"c","object":{"a":2,"c":5}}]))');i(s,o)}}if(null==Object.observe&&null!=global.Map){console.warn("Shimming Object.observe");var i=n();for(var s in i){var o=i[s];Object[s]=o}}};"function"==typeof require?require.register?require.register("ion/es6/Object.observe",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";function n(e){if(null!=e)throw new Error("Don't add items in the constructor, IE implementation of Set breaks this");var t=new Map,r={has:function(e){return t.has(e)},"delete":function(e){return t.delete(e)},add:function(e){return t.set(e,!0)},forEach:function(e,r){t.forEach(i.bind(function(t,n){e.call(r,n,this)},this))}};for(var n in r){var s=r[n];Object.defineProperty(this,n,{value:s})}}var i=r("../");r("./Map"),(null==global.Set||null==Set.prototype.forEach)&&(global.window&&console.warn("Shimming Set"),global.Set=n);t.test=function(){var e=global.Set,t={},r=function(){},n=new e;if(n.add(t),n.add(r),!n.has(t))throw new Error("Assertion Failed: (set.has(a))");if(!n.has(r))throw new Error("Assertion Failed: (set.has(b))");if(n.delete(r),n.has(r))throw new Error("Assertion Failed: (not set.has(b))");if(n.add(r),!n.has(r))throw new Error("Assertion Failed: (set.has(b))")}};"function"==typeof require?require.register?require.register("ion/es6/Set",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(){String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(e,t){t=t||this.length,t-=e.length;var r=this.lastIndexOf(e);return-1!==r&&r===t}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(e,t){return t=t||0,this.indexOf(e,t)===t}}),String.prototype.contains||(String.prototype.contains=function(){return-1!==this.indexOf(arguments)})};"function"==typeof require?require.register?require.register("ion/es6/String",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";r("./String"),r("./Map"),r("./Set"),r("./Object"),r("./Object.observe"),r("./Function"),r("./Array")};"function"==typeof require?require.register?require.register("ion/es6/index",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var _ion_index_=function(module,exports,require){"use strict";var ion=null;require("./es6"),global.DEBUG=null!=global.DEBUG?global.DEBUG:!0;for(var primitive={string:!0,number:!0,"boolean":!0,"function":!0},isPrimitive=function(e){return!(null!=e)||primitive[typeof e]||!1},normalizeProperty=function(e,t){return"function"==typeof e?e={writable:!1,value:e}:(isPrimitive(e)||Array.isArray(e))&&(e={value:e}),null!=e.get||null!=e.set||e.hasOwnProperty("value")||(e.value=void 0),e.hasOwnProperty("value")&&(e.writable=null!=e.writable?e.writable:!0),e.name=t,e},normalizeProperties=function(e){null==e&&(e={});for(var t in e){var r=e[t];e[t]=normalizeProperty(r,t)}return e},variableArgConstructs=[function(e){return new e},function(e,t){return new e(t[0])},function(e,t){return new e(t[0],t[1])},function(e,t){return new e(t[0],t[1],t[2])},function(e,t){return new e(t[0],t[1],t[2],t[3])},function(e,t){return new e(t[0],t[1],t[2],t[3],t[4])},function(e,t){return new e(t[0],t[1],t[2],t[3],t[4],t[5])},function(e,t){return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])},function(e,t){return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7])},function(e,t){return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},function(e,t){return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9])}],nodeObserveShim=(null!=Object.observe?Object.observe.checkForChanges:void 0)?Object:require("./es6/Object.observe").createShim(),isObjectObservable=function(){var e=null!=global.Node?global.Node:function(){},t=null!=global.NodeList?global.NodeList:function(){};return function(r){return r instanceof e||r instanceof t?!1:!0}}(),patch=exports.patch=function(){var e=require("./mergePatch"),t=function(t,r){return e.merge(t,r)};for(var r in e){var n=e[r];t[r]=n}return t}(),create=exports.create=function(e,t){return variableArgConstructs[t.length](e,t)},setImmediate=exports.setImmediate=function(){return null!=global.setImmediate?global.setImmediate:null!=global.document?function(){var e=document.createElement("div"),t=[];new MutationObserver(function(){var e=t;t=[];for(var r=0;r<e.length;r++){var n=e[r];n()}}).observe(e,{attributes:!0})}():function(e){setTimeout(e,0)}}(),template=exports.template=function(e,t){return e.template=null!=t?t:!0,e},createRuntime=exports.createRuntime=function(e,t,r){var n=require("./runtime/Context"),i=new n(r);if(null!=t)for(var s in t){var o=t[s];i.setVariableLiteral(s,o)}return i.createRuntime(e)},nextTick=exports.nextTick=null!=(null!=this.process?this.process.nextTick:void 0)?this.process.nextTick:function(e){return setTimeout(e,0)},clone=exports.clone=function(e,t){if(null==t&&(t=!1),Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var i=e[n];r.push(t?clone(i,t):i)}return r}if((null!=e?e.constructor:void 0)===Object){var s={};for(var o in e){var a=e[o];s[o]=t?clone(a,t):a}return s}return e},observe=exports.observe=function(e,t,r){if(e!==global&&e!==console){if(isObjectObservable(e))null!=e&&null!=t&&null!=Object.observe&&"object"==typeof e&&(DEBUG&&(t.tryWrapper=null!=t.tryWrapper?t.tryWrapper:function(e){try{t(e)}catch(r){console.error("Exception in Object.observe callback",r)}}),Object.observe(e,null!=t.tryWrapper?t.tryWrapper:t),null!=e.addEventListener?e.addEventListener("change",t):void 0);else{if(null==r)return;nodeObserveShim.observe(e,t,r)}null!=e&&null!=e.onObserved?e.onObserved(t,r):void 0}},unobserve=exports.unobserve=function(e,t,r){if(isObjectObservable(e))null!=e&&null!=t&&null!=Object.unobserve&&"object"==typeof e&&(Object.unobserve(e,null!=t.tryWrapper?t.tryWrapper:t),null!=e.removeEventListener?e.removeEventListener("change",t):void 0);else{if(null==r)return;nodeObserveShim.unobserve(e,t,r)}null!=e&&null!=e.unObserved?e.unObserved(t,r):void 0},checkForChanges=exports.checkForChanges=function(){null!=Object.observe.checkForChanges?Object.observe.checkForChanges():nodeObserveShim.observe.checkForChanges()},bind=exports.bind=function(e,t){var r=e.bind(t);return(null!=e.name?e.name.length:void 0)>0&&(r.id=null!=e.id?e.id:e.name),r},add=exports.add=function(e,t){var r;if("function"==typeof t&&((null!=t.name?t.name.length:void 0)>0||null!=t.id)&&"function"==typeof e.addEventListener){var n=null!=t.id?t.id:t.name,i=!1,s="_capture";if(n.endsWith(s)&&(i=!0,n=n.substring(0,n.length-s.length)),null!=(null!=Object.observe?Object.observe.checkForChanges:void 0)){var o=t;t=function(){o.apply(this,arguments),Object.observe.checkForChanges()}}e.addEventListener(n,t,i),r=function(){e.removeEventListener(n,t)}}else 1===e.nodeType?("string"!=typeof t&&null==(null!=t?t.nodeType:void 0)&&(t=JSON.stringify(t)),"string"==typeof t&&(t=document.createTextNode(t)),e.appendChild(t),r=function(){t.parentNode===e&&e.removeChild(t)}):(null!=e.push?e.push(t):e.add(t),r=function(){if(null!=e.lastIndexOf&&null!=e.removeAt){var r=e.lastIndexOf(t);r>=0&&e.removeAt(r)}else if("function"==typeof e.remove)e.remove(t);else if(Array.isArray(e)){var r=e.lastIndexOf(t);r>=0&&e.splice(r,1)}});return null!=t&&null!=t.onAdded?t.onAdded(e):void 0,function(){r(),null!=t&&null!=t.onRemoved?t.onRemoved(e):void 0}},defineProperties=exports.defineProperties=function(e,t){return Object.defineProperties(e,normalizeProperties(t))},defineClass=exports.defineClass=function(___definitions){var definitions=Array.prototype.slice.call(arguments,0),classDefinition=definitions[0];void 0===definitions[1]&&(definitions[1]=require("./Object")),classDefinition.super=definitions[1];var name=null!=classDefinition.name?classDefinition.name:null!=classDefinition.id&&null!=classDefinition.id.match(/([a-z_0-9\$]+)(\.js)?$/i)?classDefinition.id.match(/([a-z_0-9\$]+)(\.js)?$/i)[1]:void 0;if(null==name)throw new Error("missing name property");var classFunction;classFunction=classDefinition.hasOwnProperty("constructor")?classDefinition.constructor:eval(null!=classDefinition.super?"(function "+name+"() { "+name+".super.apply(this, arguments); })":"(function "+name+"() {})");var canSetClassProperty=function(e){if("name"===e)return!1;var t=Object.getOwnPropertyDescriptor(classFunction,e);return!(null!=t&&!t.writable&&null!=t.get)},types=new Set;types.add(classFunction);for(var i=definitions.length-1;i>=0;i--){var definition=definitions[i];if(null!=definition){types.add(definition);for(var key in definition){var value=definition[key];("test"!==key||0===i)&&canSetClassProperty(key)&&(classFunction[key]=patch(classFunction[key],value))}}}return classFunction.types=types,null!=classFunction.properties&&defineProperties(classFunction.prototype,classFunction.properties),classFunction},is=exports.is=function(e,t){return null==e?!1:null==t?!0:"function"==typeof t?"function"==typeof e.is?e.is(t):e instanceof t:e===t},makeReactive=exports.makeReactive=function(e,t){var r=0,n=null;return Object.defineProperties(e,{onObserved:{value:function(){r++,1===r&&(n=t.call(e))}},unObserved:{value:function(){r--,0===r&&(null!=n?n():void 0)}}})},serialize=exports.serialize=function(e){return JSON.stringify(e)},deserialize=exports.deserialize=function(){var e=function(e){var t=require("ion/Object").typeKey,r=e[t];if(null==r)return Object;var n=require(r);if(!n.serializable)throw new Error("Type is not serializable: "+r);return delete e[t],n},t=function(e){"string"==typeof e&&(e=JSON.parse(e));var t=require("ion/Object").typeKey,r=e[t];if(null!=r){var n=require(r);if(!n.serializable)throw new Error("Type is not serializable: "+r);var i=new n;for(var s in e){{e[s]}s!==t&&(i[s]=e[s])}return i}return e};return t.extractType=e,t}(),test=exports.test={defineClass:function(){var e=defineClass({id:"Foo",constructor:function(e){this.number=e},properties:{getValue:function(){return this.number}}});if(2!==new e(2).getValue())throw new Error("Assertion Failed: (new Foo(2).getValue() is 2)")},defineProperties:{"should allow primitive values":function(){var e={},t=defineProperties(e,{f:function(){return"function"},i:2,b:!0,a:[],s:"hello"});if(e!==t)throw new Error("Assertion Failed: (object is result)");if("function"!=typeof e.f)throw new Error("Assertion Failed: (typeof object.f is 'function')");if("function"!==e.f())throw new Error("Assertion Failed: (object.f() is 'function')");if(2!==e.i)throw new Error("Assertion Failed: (object.i is 2)");if(e.b!==!0)throw new Error("Assertion Failed: (object.b is true)");if(!Array.isArray(e.a))throw new Error("Assertion Failed: (Array.isArray(object.a))");if("hello"!==e.s)throw new Error("Assertion Failed: (object.s is 'hello')")}}},_ref2=["runtime","compiler","builder","browser"],_i3=0;_i3<_ref2.length;_i3++){var name=_ref2[_i3];!function(e){Object.defineProperty(exports,e,{enumerable:!0,get:function(){return require("./"+e)}})}(name)}null!=global.window&&global.window.addEventListener("resize",checkForChanges)};"function"==typeof require?require.register?require.register("ion/index",_ion_index_):_ion_index_.call(this,module,exports,require):_ion_index_.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";{var n=r("./"),i=function(e){var t=typeof e;return null!=e&&"object"===t||"function"===t},s=null,o=t.canSetProperty=function(e,t){return!("function"==typeof e&&"name"===t)},a=t.merge=function(e,t,r){var n=null!=(null!=r?r.deleteNull:void 0)?r.deleteNull:!0;if((null!=t?t.constructor:void 0)!==Object)return t;i(e)||(e=null!=(null!=r?r.factory:void 0)?r.factory(t):{});for(var l in t){var u=t[l];if(n&&u===s)delete e[l];else{var c=a(e[l],u,r);o(e,l)&&(e[l]=c)}}return e},l=t.combine=function(e,t){return a(e,t,{deleteNull:!1})},u=t.watch=function(e,t,r){if(null==r&&(r=!0),!i(e))throw new Error("Cannot watch: #{object}");var o={},a=null,c=function(t){for(var r in t){null!=o[r]?o[r]():void 0;var n=e[r];i(n)&&!function(e){var t=function(t){var r={};r[e]=t,p(r)};o[e]=u(n,t,!1)}(r)}},h=null,p=function(e){r?(a=l(a,e),c(a),h=null!=h?h:setTimeout(function(){t(a),a=null,h=null},0)):t(e)},f=function(t){for(var r={},n=0;n<t.length;n++){var i=t[n];"_"!==i.name[0]&&(r=null!=r?r:{},r[i.name]=null!=e[i.name]?e[i.name]:s)}null!=r&&p(r)};if(DEBUG){var v=f;f=function(e){try{v(e)}catch(t){console.error(t)}}}return c(e),n.observe(e,f),function(){n.unobserve(e,f);for(var t in o){var r=o[t];r()}}},c=t.diff=function(e,t){if(e===t)return void 0;if(null==e||null==t||"object"!=typeof t||"object"!=typeof e)return null!=t?t:null;var r=void 0;for(var n in e)if(e.hasOwnProperty(n)){var i=c(e[n],t[n]);void 0!==i&&(r=null!=r?r:{},r[n]=i)}for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(r=null!=r?r:{},r[n]=t[n]);return r},h=t.isChange=function(e,t){if(e===t)return!1;if(null==e||null==t||"object"!=typeof t||"object"!=typeof e)return!0;for(var r in t)if((null!==t[r]||e.hasOwnProperty(r))&&h(e[r],t[r]))return!0;return!1};t.test=function(){var e=function(e,t){return!h(e,t)&&!h(t,e)};return{merge:function(){if(!e({a:{b:2,c:3},d:4},a({a:{b:2}},{a:{c:3},d:4})))throw new Error("Assertion Failed: (equal({a:{b:2,c:3},d:4}, merge({a:{b:2}}, {a:{c:3},d:4})))");if(!e({b:2},a(null,{b:2})))throw new Error("Assertion Failed: (equal({b:2}, merge(null, {b:2})))");if(!e({a:1,b:2},a({a:1,b:2,c:3},{c:void 0})))throw new Error("Assertion Failed: (equal({a:1,b:2}, merge({a:1,b:2,c:3}, {c:undefined})))");var t=function(e){return 2*e};if(!e({a:t},a({},{a:t})))throw new Error("Assertion Failed: (equal({a:double}, merge({},{a:double})))")},isChange:function(){if(!h({a:1},null))throw new Error("Assertion Failed: (isChange({a:1}, null))");if(h(null,null))throw new Error("Assertion Failed: (not isChange(null, null))");if(!h(void 0,null))throw new Error("Assertion Failed: (isChange(undefined, null))");if(!h(null,void 0))throw new Error("Assertion Failed: (isChange(null, undefined))");if(h({a:1},{a:1}))throw new Error("Assertion Failed: (not isChange({a:1}, {a:1}))");if(h({a:{b:2,c:3}},{a:{b:2}}))throw new Error("Assertion Failed: (not isChange({a:{b:2,c:3}}, {a:{b:2}}))");if(!h({a:{b:2}},{a:{b:3}}))throw new Error("Assertion Failed: (isChange({a:{b:2}}, {a:{b:3}}))");if(h({a:1},{b:null}))throw new Error("Assertion Failed: (not isChange({a:1}, {b:null}))")},diff:function(){if(!e({b:2},c({a:1},{a:1,b:2})))throw new Error("Assertion Failed: (equal({b:2}, diff({a:1}, {a:1,b:2})))");if(!e({a:{b:3,c:null}},c({a:{b:2,c:4}},{a:{b:3}})))throw new Error("Assertion Failed: (equal({a:{b:3,c:null}}, diff({a:{b:2,c:4}}, {a:{b:3}})))");if(!e({a:1},c(null,{a:1})))throw new Error("Assertion Failed: (equal({a:1}, diff(null, {a:1})))");if(!e({c:{d:{f:4}}},c({a:1,b:2,c:{d:{e:1,f:2}}},{a:1,b:2,c:{d:{e:1,f:4}}})))throw new Error("Assertion Failed: (equal({c:{d:{f:4}}}, diff({a:1,b:2,c:{d:{e:1,f:2}}}, {a:1,b:2,c:{d:{e:1,f:4}}})))");if(!e(null,c({a:1},void 0)))throw new Error("Assertion Failed: (equal(null, diff({a:1}, undefined)))");if(!e(null,c({a:1},null)))throw new Error("Assertion Failed: (equal(null, diff({a:1}, null)))");if(!e(void 0,c({a:{b:2}},{a:{b:2}})))throw new Error("Assertion Failed: (equal(undefined, diff({a:{b:2}}, {a:{b:2}})))")},observe:function(t){if(null==Object.observe)return t(null,"Object.observe missing.");var r={name:"Kris",age:41,children:{Sadera:{grandchildren:{One:1,Two:2}},Orion:{},Third:{}}},i=n.clone(r,!0),s=u(r,function(n){i=a(i,n),e(r,i)&&(t(),s())});r.name="Fred",r.children=n.patch(r.children,{Orion:{a:1,b:2,c:12},Sadera:{grandchildren:{three:3}}}),delete r.children.Third,n.checkForChanges()}}}()}};"function"==typeof require?require.register?require.register("ion/mergePatch",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./DynamicExpression"),s=n.defineClass({name:"ArrayExpression",constructor:function o(){if(o.super.apply(this,arguments),null==this.elements)throw new Error("elements is required");if(null==this.context)throw new Error("context is required")},properties:{observeElements:!1,notifyIfActive:function(){this.isActive&&this.notify()},setArgumentValue:function(e,t){this.argumentValues[e]!==t&&(this.observeElements&&n.unobserve(this.argumentValues[e],this.itemObserver),this.argumentValues[e]=t,this.observeElements&&n.observe(t,this.itemObserver=null!=this.itemObserver?this.itemObserver:n.bind(function(){this.notifyIfActive()},this)),this.notifyIfActive())},activate:function(){if(null==this.argumentValues){for(var e=[],t=this.elements,r=0;r<t.length;r++){var n=t[r];e.push(this.context.createRuntime(n))}this.expressions=e,this.argumentValues=[],this.expressionWatchers=[];for(var i=0;i<this.expressions.length;i++)this.expressionWatchers[i]=this.setArgumentValue.bind(this,i)}for(var o=this.expressions,a=0;a<o.length;a++){var i=a,l=o[a];l.watchValue(this.expressionWatchers[i])}s.super.prototype.activate.apply(this,arguments),this.setValue(this.argumentValues)},deactivate:function(){for(var e=this.expressions,t=0;t<e.length;t++){var r=t,n=e[t];n.unwatchValue(this.expressionWatchers[r])}s.super.prototype.deactivate.apply(this,arguments)}},test:function(){function e(e){i=e}var t=r("./Context"),n=new s({context:new t,elements:[{type:"Literal",value:1},{type:"Literal",value:2}]}),i=void 0;if(n.watchValue(e),"[1,2]"!==JSON.stringify(i))throw new Error('Assertion Failed: (JSON.stringify(result) is "[1,2]")');n.unwatchValue(e)}},i);e.exports=t=s};"function"==typeof require?require.register?require.register("ion/runtime/ArrayExpression",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./Statement"),s=n.defineClass({name:"BlockStatement",properties:{activate:function(){if(s.super.prototype.activate.apply(this,arguments),null==this.statements){for(var e=[],t=this.body,r=0;r<t.length;r++){var n=t[r];e.push(this.context.createRuntime(n))}this.statements=e}for(var i=this.statements,o=0;o<i.length;o++){var a=i[o];a.activate()}},deactivate:function(){s.super.prototype.deactivate.apply(this,arguments);for(var e=this.statements.length-1;e>=0;e--){var t=this.statements[e];t.deactivate()}}}},i);e.exports=t=s};"function"==typeof require?require.register?require.register("ion/runtime/BlockStatement",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./"),s=i.DynamicExpression,o=(i.ArrayExpression,i.Factory),a={};a.args=null,a.activate=function(){l.super.prototype.activate.apply(this,arguments),this.calleeExpression=null!=this.calleeExpression?this.calleeExpression:this.context.createRuntime(this.callee),this.calleeExpression.watchValue(this.calleeWatcher=null!=this.calleeWatcher?this.calleeWatcher:n.bind(function(e){this.isActive&&null==e&&!this.existential&&null!=(null!=this.loc?this.loc.start.source:void 0)&&console.warn("Function is "+e+" ("+o.toCode(this.callee)+") ("+this.loc.start.source+":"+this.loc.start.line+":"+(this.loc.start.column+1)+")"),this.calleeValue=e;
var t=null!=this.calleeExpression.objectExpression?this.calleeExpression.objectExpression.value:void 0;if(t!==this.thisArg&&(n.unobserve(this.thisarg,this.thisObserver),null!=this.unwatch?this.unwatch():void 0,this.thisArg=t,!(null!=this.calleeValue?this.calleeValue.template:void 0))){var r=Array.isArray(t);r?this.unwatch=n.patch.watch(t,this.thisObserver=null!=this.thisObserver?this.thisObserver:n.bind(function(){this.evaluate()},this)):n.observe(t,this.thisObserver=null!=this.thisObserver?this.thisObserver:n.bind(function(){this.evaluate()},this))}this.evaluate()},this)),this.argumentExpressions=null!=this.argumentExpressions?this.argumentExpressions:this.context.createRuntime({type:"ArrayExpression",elements:this.arguments,observeElements:!(null!=this.calleeValue?this.calleeValue.template:void 0)}),this.argumentExpressions.watchValue(this.argumentWatcher=null!=this.argumentWatcher?this.argumentWatcher:n.bind(function(e){this.argumentsValue=e,this.evaluate()},this))},a.deactivate=function(){l.super.prototype.deactivate.apply(this,arguments),this.calleeExpression.unwatchValue(this.calleeWatcher),this.argumentExpressions.unwatchValue(this.argumentWatcher),null!=this.template&&(this.template.unwatchValue(this.templateWatcher),delete this.template)},a._evaluateInternal=function(){if(this.isActive&&null!=this.calleeValue&&null!=this.argumentsValue){var e=void 0;this.calleeValue.template?(null!=this.template&&this.template.unwatchValue(this.templateWatcher),this.template=this.calleeValue.apply(this.thisArg,this.argumentsValue),this.template.watchValue(this.templateWatcher=null!=this.templateWatcher?this.templateWatcher:this.setValue.bind(this))):(e="NewExpression"===this.type?n.create(this.calleeValue,this.argumentsValue):this.calleeValue.apply(this.thisArg,this.argumentsValue),this.setValue(e))}},a.evaluate=DEBUG?function(){try{this._evaluateInternal()}catch(e){console.error(null!=e.stack?e.stack:e)}}:function(){return this._evaluateInternal()};var l=n.defineClass({name:"CallExpression",properties:a},s);e.exports=l};"function"==typeof require?require.register?require.register("ion/runtime/CallExpression",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./DynamicExpression"),s=n.defineClass({name:"ConditionalExpression",properties:{activate:function(){s.super.prototype.activate.apply(this,arguments),this.testExpression=null!=this.testExpression?this.testExpression:this.context.createRuntime(this.test),this.testExpression.watchValue(this.testWatcher=null!=this.testWatcher?this.testWatcher:n.bind(function(e){this.hasOwnProperty("testValue")&&Boolean(e)===Boolean(this.testValue)||(this.testValue=e,e?(null!=this.alternateExpression?this.alternateExpression.unwatchValue(this.alternateWatcher):void 0,this.alternateExpression=null,this.consequentExpression=null!=this.consequentExpression?this.consequentExpression:this.context.createRuntime(this.consequent),this.consequentExpression.watchValue(this.consequentWatcher=null!=this.consequentWatcher?this.consequentWatcher:n.bind(function(e){this.testValue&&this.setValue(e)},this))):(null!=this.consequentExpression?this.consequentExpression.unwatchValue(this.consequentWatcher):void 0,this.consequentExpression=null,this.alternateExpression=null!=this.alternateExpression?this.alternateExpression:this.context.createRuntime(this.alternate),this.alternateExpression.watchValue(this.alternateWatcher=null!=this.alternateWatcher?this.alternateWatcher:n.bind(function(e){this.testValue||this.setValue(e)},this))))},this))},deactivate:function(){s.super.prototype.deactivate.apply(this,arguments),this.testExpression.unwatchValue(this.testWatcher),null!=this.consequentExpression?this.consequentExpression.unwatchValue(this.consequentWatcher):void 0,null!=this.alternateExpression?this.alternateExpression.unwatchValue(this.alternateWatcher):void 0}}},i);e.exports=s};"function"==typeof require?require.register?require.register("ion/runtime/ConditionalExpression",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./Factory"),s=r("./Literal"),o=function(){},a=n.defineClass({name:"Context",constructor:function(e,t){this.output=t,this.parent=e,this.variables={},this.root=null!=(null!=this.parent?this.parent.root:void 0)?this.parent.root:this,this._watched={},this._runtimes={}},properties:{newContext:function(e){return null==e&&(e=this.output),new a(this,e)},createRuntime:function(e){return i.createRuntime(this,e)},get:function(e){var t=this.getVariable(e);if(null==t)throw new Error("Variable not found: '"+e+"'");return t.value},getVariable:function(e){for(var t,r=this;null!=r;){var n=r.variables[e];if(null!=n)return n;r=r.parent}if(t=global[e],void 0===t)throw new Error("Variable not found: '"+e+"'");var i=this.root.globals=null!=this.root.globals?this.root.globals:{};return i[e]=null!=i[e]?i[e]:new s({value:t})},setVariableFromAst:function(e,t){null!=e&&this.setVariableExpression(e,this.createRuntime(t))},setVariableLiteral:function(e,t){null!=e&&this.setVariableExpression(e,new s({value:t}))},setVariableExpression:function(e,t){return null!=e?(t.watchValue(o),this.variables[e]=t):void 0}}});e.exports=t=a};"function"==typeof require?require.register?require.register("ion/runtime/Context",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=n.defineClass({name:"DynamicExpression",properties:{isActive:!1,activate:function(){this.isActive=!0},deactivate:function(){this.isActive=!1},watchValue:function(e){var t=this._watchers=null!=this._watchers?this._watchers:[];if(0===t.length&&this.activate(),t.push(e),this.hasValue()){var r=this.getValue();this._notifyWatcher(e,r)}},unwatchValue:function(e){this._watchers.remove(e),this.hasValue()&&this._notifyWatcher(e,void 0),0===this._watchers.length&&this.deactivate()},_notifyWatcher:function(e,t){return e.call(this,t)},notify:function(){if(null!=this._watchers)for(var e=this.getValue(),t=this._watchers,r=0;r<t.length;r++){var n=t[r];this._notifyWatcher(n,e)}},hasValue:function(){return this.hasOwnProperty("value")},getValue:function(){return this.value},setValue:function(e){e===this.value&&this.hasValue()||(this.value=e,this.notify())}},test:function(){var e=new i;if(void 0!==e.getValue())throw"d.getValue() != undefined";var t=10,r=function(e){void 0!==e&&(t+=e)};if(e.watchValue(r),10!==t)throw new Error("Assertion Failed: (total is 10)");if(e.setValue(10),10!==e.getValue())throw new Error("Assertion Failed: (d.getValue() is 10)");if(20!==t)throw new Error("Assertion Failed: (total is 20)");if(e.setValue(20),40!==t)throw new Error("Assertion Failed: (total is 40)");if(e.unwatchValue(r),40!==t)throw new Error("Assertion Failed: (total is 40)");if(e.setValue(50),40!==t)throw new Error("Assertion Failed: (total is 40)")}},r("./Expression"));e.exports=t=i};"function"==typeof require?require.register?require.register("ion/runtime/DynamicExpression",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=n.defineClass({name:"Expression",properties:{watchValue:function(e){return this.watch(e)},unwatchValue:function(e){return this.unwatch(e)}}},r("./Node"));e.exports=t=i};"function"==typeof require?require.register?require.register("ion/runtime/Expression",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./Statement"),s=n.defineClass({name:"ExpressionStatement",properties:{activate:function(){s.super.prototype.activate.apply(this,arguments),this.runtimeExpression=null!=this.runtimeExpression?this.runtimeExpression:this.context.createRuntime(this.expression),this.runtimeExpression.watchValue(this.runtimeExpressionWatcher=null!=this.runtimeExpressionWatcher?this.runtimeExpressionWatcher:n.bind(function(e){this.expressionValue!==e&&(this.expressionValue=e,null!=this._remove?this._remove():void 0,this._remove=null,null!=this.context.output&&void 0!==e&&(this._remove=n.add(this.context.output,e)))},this))},deactivate:function(){s.super.prototype.deactivate.apply(this,arguments),this.runtimeExpression.unwatchValue(this.runtimeExpressionWatcher)}}},i);e.exports=t=s};"function"==typeof require?require.register?require.register("ion/runtime/ExpressionStatement",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";function n(e,t){null==t&&(t=a);for(var r in t){var i=t[r],s=e[r],l=i[s];if(null!=l)return l.constructor===o?l:n(e,l)}return null}{var i=r("../"),s=r("./Literal"),o=(r("./Expression"),i.defineClass({name:"Factory",properties:{runtime:"./OperationExpression",createRuntime:{writable:!0,value:function(e,t){var n=i.clone(t);n.context=e,n.factory=this;var s=r(this.runtime);return new s(n)}},canCache:{writable:!0,value:function(){return!1}},toCode:{writable:!0,value:function(e){return"BinaryExpression"===e.type?u(e.left)+e.operator+u(e.right):"("+JSON.stringify(e)+")"}}}})),a={type:{VariableDeclaration:i.patch(new o,{runtime:"./VariableDeclaration"}),ThisExpression:i.patch(new o,{createRuntime:function(e){return e.getVariable("this")},toCode:function(){return"this"}}),Identifier:i.patch(new o,{createRuntime:function(e,t){return e.getVariable(t.name)},canCache:function(){return!0},toCode:function(e){return e.name}}),Function:i.patch(new o,{createRuntime:function(e,t){var r=t.value;return t.context&&(r=r(e)),new s({value:r})}}),Template:i.patch(new o,{runtime:"./Template"}),Literal:i.patch(new o,{runtime:"./Literal",canCache:function(){return!0},toCode:function(e){return JSON.stringify(e.value)}}),Property:i.patch(new o,{runtime:"./Property"}),IfStatement:i.patch(new o,{runtime:"./IfStatement"}),BlockStatement:i.patch(new o,{runtime:"./BlockStatement"}),ReturnStatement:i.patch(new o,{runtime:"./ReturnStatement"}),ObjectExpression:i.patch(new o,{runtime:"./ObjectExpression"}),ArrayExpression:i.patch(new o,{runtime:"./ArrayExpression"}),ExpressionStatement:i.patch(new o,{runtime:"./ExpressionStatement"}),ForOfStatement:i.patch(new o,{runtime:"./ForInOfStatement"}),ForInStatement:i.patch(new o,{runtime:"./ForInOfStatement"}),MemberExpression:i.patch(new o,{runtime:"./MemberExpression",canCache:function(e){return l(e.object)&&l(e.property)},toCode:function(e){return e.computed?""+u(e.object)+"["+u(e.property)+"]":""+u(e.object)+"."+u(e.property)}}),CallExpression:i.patch(new o,{runtime:"./CallExpression"}),NewExpression:i.patch(new o,{runtime:"./CallExpression"}),UnaryExpression:{operator:{"!":i.patch(new o,{evaluate:function(e){return!e}}),"typeof":i.patch(new o,{evaluate:function(e){return typeof e}}),"void":i.patch(new o,{evaluate:function(e){return void e}}),"-":i.patch(new o,{evaluate:function(e){return-e}}),"+":i.patch(new o,{evaluate:function(e){return+e}}),"~":i.patch(new o,{evaluate:function(e){return~e}}),"?":i.patch(new o,{evaluate:function(e){return null!=e}})}},ConditionalExpression:i.patch(new o,{runtime:"./ConditionalExpression"}),BinaryExpression:{operator:{"*":i.patch(new o,{evaluate:function(e,t){return e*t}}),"/":i.patch(new o,{evaluate:function(e,t){return e/t}}),"%":i.patch(new o,{evaluate:function(e,t){return e%t}}),"+":i.patch(new o,{evaluate:function(e,t){return e+t}}),"-":i.patch(new o,{evaluate:function(e,t){return e-t}}),"&&":i.patch(new o,{evaluate:function(e,t){return e&&t}}),"||":i.patch(new o,{evaluate:function(e,t){return e||t}}),"&":i.patch(new o,{evaluate:function(e,t){return e&t}}),"|":i.patch(new o,{evaluate:function(e,t){return e|t}}),"==":i.patch(new o,{evaluate:function(e,t){return e==t}}),"!=":i.patch(new o,{evaluate:function(e,t){return e!=t}}),"===":i.patch(new o,{evaluate:function(e,t){return e===t}}),"!==":i.patch(new o,{evaluate:function(e,t){return e!==t}}),"<":i.patch(new o,{evaluate:function(e,t){return t>e}}),">":i.patch(new o,{evaluate:function(e,t){return e>t}}),"<=":i.patch(new o,{evaluate:function(e,t){return t>=e}}),">=":i.patch(new o,{evaluate:function(e,t){return e>=t}})}}}},l=t.canCache=function(e){if(null!=e){var t=n(e);if(null!=t)return t.canCache(e)}return!1},u=t.toCode=function(e){if(null!=e){var t=e._toCode;if(null==t){var r=n(e);null!=r&&(t=r.toCode(e)),null!=t&&"object"==typeof e&&Object.defineProperty(e,"_toCode",{value:t})}return t}return JSON.stringify(e)};t.createRuntime=function(e,t){"string"!=typeof(null!=t?t.type:void 0)&&(t={type:"Literal",value:t});var r=n(t);if(null==r)throw new Error("Factory not found for ast:\n"+JSON.stringify(t,null,"  "));return r.createRuntime(e,t)},t.test=function(){var e=n({type:"BinaryExpression",operator:">",left:{type:"Literal",value:1},right:{type:"Literal",value:2}});if(e!==a.type.BinaryExpression.operator[">"])throw new Error('Assertion Failed: (factory is lookup.type.BinaryExpression.operator[">"])');if(null==a.type.BinaryExpression.operator[">"])throw new Error('Assertion Failed: (lookup.type.BinaryExpression.operator[">"]?)')}}};"function"==typeof require?require.register?require.register("ion/runtime/Factory",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./Statement"),s=r("./DynamicExpression"),o=n.defineClass({name:"ForInOfStatement",properties:{toKey:function(e){return"ForOfStatement"===this.type?parseInt(e):e},forEach:function(e,t){if("ForOfStatement"===this.type)for(var r=0;r<e.length;r++){var n=e[r];t(r,n)}else for(var r in e){var n=e[r];t(r,n)}},activate:function(){o.super.prototype.activate.apply(this,arguments),null==this.statements&&(this.statements={},this.valueName=null!=this.left.declarations["ForOfStatement"===this.type?0:1]?this.left.declarations["ForOfStatement"===this.type?0:1].id.name:void 0,this.keyName=null!=this.left.declarations["ForOfStatement"===this.type?1:0]?this.left.declarations["ForOfStatement"===this.type?1:0].id.name:void 0),this.collectionExpression=null!=this.collectionExpression?this.collectionExpression:this.context.createRuntime(this.right),this.collectionExpression.watchValue(this.collectionWatcher=null!=this.collectionWatcher?this.collectionWatcher:n.bind(function(e){this.collection!==e&&(null!=this.collection&&(this.forEach(this.collection,n.bind(function(e,t){this.removeItem(e,t)},this)),n.unobserve(this.collection,this.collectionObserver)),this.collection=e,null!=this.collection&&(this.forEach(this.collection,n.bind(function(e,t){this.addItem(e,t)},this)),n.observe(this.collection,this.collectionObserver=null!=this.collectionObserver?this.collectionObserver:this.applyChanges.bind(this))))},this))},deactivate:function(){o.super.prototype.deactivate.apply(this,arguments),this.collectionExpression.unwatchValue(this.collectionWatcher)},addItem:function(e,t,r){if(null==r&&(r=!0),void 0!==t){var n=this.context.newContext();null!=this.valueName&&n.setVariableExpression(this.valueName,new s({value:t})),null!=this.keyName&&n.setVariableExpression(this.keyName,new s({value:e}));var i=n.createRuntime(this.body);return this.statements[e]=i,r&&i.activate(),i}},removeItem:function(e){var t=this.statements[e];return null!=t&&this.disposeStatement(t),delete this.statements[e],t},disposeStatement:function(e){if(null!=this.remove){var t=e.context.createRuntime(this.remove);t.activate()}e.deactivate()},summarize:function(e){for(var t=n.bind(function(e){return null==e?!0:"_"===e[0]?!0:"length"===e&&"ForOfStatement"===this.type?!0:!1},this),r=new Map,i=0;i<e.length;i++){var s=e[i],o=s.type,a=s.object,l=s.name,u=s.oldValue;if(!t(l))if(r.has(l)){var c=r.get(l);c.type=o}else r.set(l,{type:o,object:a,name:l,oldValue:u})}var h=[];return r.forEach(function(e,t){var r=e.object[t];r!==e.oldValue&&(delete e.object,h.push(e))}),h},applyChanges:function(e){if(e=this.summarize(e),0!==e.length){for(var t=new Map,r=n.bind(function(e,t){return"ForOfStatement"===this.type?t:e},this),i=[],s=0;s<e.length;s++){var o=e[s],a=o.name,l=o.oldValue,u=this.toKey(a);if(void 0!==l){var c=r(u,l),h=this.statements[u];null!=h&&(delete this.statements[u],t.set(c,h))}}for(var p=0;p<e.length;p++){var f=e[p],a=f.name,l=f.oldValue,v=this.collection[a],u=this.toKey(a);if(void 0!==v){var c=r(u,v),h=t.get(c);null!=h?("ForOfStatement"===this.type?null!=this.keyName&&h.context.variables[this.keyName].setValue(u):null!=this.valueName&&h.context.variables[this.valueName].setValue(v),this.statements[u]=h,t.delete(c)):(h=this.addItem(u,v,!1),null!=h&&i.push(h))}}t.forEach(n.bind(function(e){this.disposeStatement(e)},this));for(var d=0;d<i.length;d++){var h=i[d];h.activate()}}}}},i);e.exports=t=o};"function"==typeof require?require.register?require.register("ion/runtime/ForInOfStatement",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./Statement"),s=n.defineClass({name:"IfStatement",properties:{activate:function(){s.super.prototype.activate.apply(this,arguments),this.testExpression=null!=this.testExpression?this.testExpression:this.context.createRuntime(this.test),this.testExpression.watchValue(this.testExpressionWatcher=null!=this.testExpressionWatcher?this.testExpressionWatcher:n.bind(function(e){e?((null!=this.alternateStatement?this.alternateStatement.isActive:void 0)&&(null!=this.alternateStatement?this.alternateStatement.deactivate():void 0,delete this.alternateStatement),this.consequentStatement=null!=this.consequentStatement?this.consequentStatement:this.context.createRuntime(this.consequent),this.consequentStatement.activate()):((null!=this.consequentStatement?this.consequentStatement.isActive:void 0)&&(null!=this.consequentStatement?this.consequentStatement.deactivate():void 0,delete this.consequentStatement),null!=this.alternate&&(this.alternateStatement=null!=this.alternateStatement?this.alternateStatement:this.context.createRuntime(this.alternate),this.alternateStatement.activate()))},this))},deactivate:function(){s.super.prototype.deactivate.apply(this,arguments),this.testExpression.unwatchValue(this.testExpressionWatcher),(null!=this.alternateStatement?this.alternateStatement.isActive:void 0)&&(null!=this.alternateStatement?this.alternateStatement.deactivate():void 0),(null!=this.consequentStatement?this.consequentStatement.isActive:void 0)&&(null!=this.consequentStatement?this.consequentStatement.deactivate():void 0)}}},i);e.exports=t=s};"function"==typeof require?require.register?require.register("ion/runtime/IfStatement",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=n.defineClass({name:"Literal",properties:{watchValue:function(e){e(this.value)},unwatchValue:function(e){e(void 0)}}},r("./Expression"));e.exports=t=i};"function"==typeof require?require.register?require.register("ion/runtime/Literal",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./"),s=i.DynamicExpression,o=i.Factory,a=n.defineClass({name:"MemberExpression",properties:{activate:function(){a.super.prototype.activate.apply(this,arguments),this.objectExpression=null!=this.objectExpression?this.objectExpression:this.context.createRuntime(this.object),this.propertyExpression=null!=this.propertyExpression?this.propertyExpression:this.context.createRuntime(this.computed?this.property:this.property.name),this.objectExpression.watchValue(this.objectWatcher=null!=this.objectWatcher?this.objectWatcher:n.bind(function(e){this.objectValue=e,this.updateValue()},this)),this.propertyExpression.watchValue(this.propertyWatcher=null!=this.propertyWatcher?this.propertyWatcher:n.bind(function(e){this.propertyValue=e,this.updateValue()},this))},deactivate:function(){a.super.prototype.deactivate.apply(this,arguments),this.objectExpression.unwatchValue(this.objectWatcher),this.propertyExpression.unwatchValue(this.propertyWatcher)},updateValue:function(){var e=void 0;null!=this.objectValue?null!=this.propertyValue&&(e=this.objectValue[this.propertyValue]):this.isActive&&!this.existential&&null!=(null!=this.loc&&null!=this.loc.start?this.loc.start.source:void 0)&&this.hasOwnProperty("objectValue")&&this.hasOwnProperty("propertyValue")&&console.warn("Cannot read "+o.toCode(this.property)+" property of "+this.objectValue+" ("+o.toCode(this.object)+") ("+this.loc.start.source+":"+this.loc.start.line+":"+(this.loc.start.column+1)+")"),this.setValue(e),(this.observedObject!==this.objectValue||this.observedProperty!==this.propertyValue)&&(this.observedObject=this.objectValue,this.observedProperty=this.propertyValue,null!=this.objectObserver?this.objectObserver():void 0,null!=this.objectValue&&(this.objectObserver=n.observe(this.objectValue,n.bind(function(){this.updateValue()},this),this.propertyValue)))},setMemberValue:function(e){null!=this.objectValue&&null!=this.propertyValue&&(this.objectValue[this.propertyValue]=e)}},test:function(){}},s);e.exports=t=a};"function"==typeof require?require.register?require.register("ion/runtime/MemberExpression",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=n.defineClass({name:"Node"});e.exports=t=i};"function"==typeof require?require.register?require.register("ion/runtime/Node",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./DynamicExpression"),s=n.defineClass({name:"ObjectExpression",properties:{setLeftValue:function(e){this.value=e},activate:function(){s.super.prototype.activate.apply(this,arguments),this.typeExpression=null!=this.typeExpression?this.typeExpression:this.context.createRuntime(null!=this.objectType?this.objectType:null),this.typeExpression.watchValue(this.typeWatcher=null!=this.typeWatcher?this.typeWatcher:n.bind(function(e){var t;if(n.is(this.value,e)?t=this.value:(null!=this.statements?this.statements.deactivate():void 0,this.statements=null,t=null!=e?e:{}),null!=t&&null==this.statements){var r=this.context.newContext(t);this.statements=r.createRuntime({type:"BlockStatement",body:this.properties}),this.statements.activate()}this.setValue(t)},this))},deactivate:function(){s.super.prototype.deactivate.apply(this,arguments),this.typeExpression.unwatchValue(this.typeWatcher)}}},i);e.exports=t=s};"function"==typeof require?require.register?require.register("ion/runtime/ObjectExpression",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./DynamicExpression"),s=n.defineClass({name:"OperationExpression",constructor:function o(){o.super.apply(this,arguments),null==this.args&&("BinaryExpression"===this.type?this.args=[this.left,this.right]:"UnaryExpression"===this.type?this.args=[this.argument]:"ConditionalExpression"===this.type&&(this.args=[this.test,this.consequent,this.alternate]))},properties:{args:null,activate:function(){s.super.prototype.activate.apply(this,arguments),this.argumentExpressions=null!=this.argumentExpressions?this.argumentExpressions:this.context.createRuntime({type:"ArrayExpression",elements:this.args,observeElements:this.factory.observe}),this.argumentExpressions.watchValue(this.watcher=null!=this.watcher?this.watcher:n.bind(function(e){this.argumentValues=e,this.evaluate()},this))},deactivate:function(){s.super.prototype.deactivate.apply(this,arguments),this.argumentExpressions.unwatchValue(this.watcher)},evaluate:function(){if(null==this.factory.evaluate)throw new Error("evaluate method not defined for operation: "+this.factory);var e=this.factory.evaluate.apply(this.context,this.argumentValues);this.setValue(e)}}},i);e.exports=s};"function"==typeof require?require.register?require.register("ion/runtime/OperationExpression",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./Statement"),s=n.defineClass({name:"Property",properties:{activate:function(){s.super.prototype.activate.apply(this,arguments),this.keyExpression=null!=this.keyExpression?this.keyExpression:this.context.createRuntime(this.computed?this.key:null!=this.key.name?this.key.name:this.key.value),this.valueExpression=null!=this.valueExpression?this.valueExpression:this.context.createRuntime(this.value),this.keyExpression.watchValue(this.keyWatcher=null!=this.keyWatcher?this.keyWatcher:n.bind(function(e){if(null!=e&&null!=this.valueExpression.setLeftValue){var t=this.context.output?null!=this.context.output?this.context.output[e]:void 0:this.context.get(e);null!=t&&this.valueExpression.setLeftValue(t)}this.keyValue=e,this.setProperty()},this)),this.valueExpression.watchValue(this.valueWatcher=null!=this.valueWatcher?this.valueWatcher:n.bind(function(e){this.valueValue=e,this.setProperty()},this))},deactivate:function(){s.super.prototype.deactivate.apply(this,arguments),n.unobserve(this.context.output,this.contextObserver,this.leftValue),this.keyExpression.unwatchValue(this.keyWatcher),this.valueExpression.unwatchValue(this.valueWatcher)},setProperty:function(e,t){if(null==e&&(e=this.keyValue),null==t&&(t=this.valueValue),this.hasOwnProperty("keyValue")&&this.hasOwnProperty("valueValue")&&null!=e&&null!=this.context.output){var r=this.context.output[e];r!==t&&(this.context.output[e]=t)}}}},i);e.exports=t=s};"function"==typeof require?require.register?require.register("ion/runtime/Property",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./Statement"),s=n.defineClass({name:"ReturnStatement",properties:{activate:function(){s.super.prototype.activate.apply(this,arguments),this.argumentExpression=null!=this.argumentExpression?this.argumentExpression:this.context.createRuntime(this.argument),this.argumentExpression.watchValue(this.argumentWatcher=null!=this.argumentWatcher?this.argumentWatcher:n.bind(function(e){return this.context.returnExpression.setValue(e)},this))},deactivate:function(){s.super.prototype.deactivate.apply(this,arguments),this.argumentExpression.unwatchValue(this.argumentWatcher)}}},i);e.exports=t=s};"function"==typeof require?require.register?require.register("ion/runtime/ReturnStatement",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=n.defineClass({name:"Statement",properties:{isActive:!1,activate:function(){this.isActive=!0},deactivate:function(){this.isActive=!1}}},r("./Node"));e.exports=t=i};"function"==typeof require?require.register?require.register("ion/runtime/Statement",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./BlockStatement"),s=r("./DynamicExpression"),o=function(){},a=n.defineClass({name:"Template",constructor:function l(){l.super.apply(this,arguments),this.context.returnExpression=new s},properties:{watchValue:function(e){null==e&&(e=o),this.isActive||this.activate(),this.context.returnExpression.watchValue(e)},unwatchValue:function(e){this.context.returnExpression.unwatchValue(e),this.context.returnExpression.isActive||this.deactivate()}}},i);e.exports=t=a};"function"==typeof require?require.register?require.register("ion/runtime/Template",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){"use strict";var n=r("../"),i=r("./Statement"),s=n.defineClass({name:"VariableDeclaration",constructor:function o(){o.super.apply(this,arguments);for(var e=this.declarations,t=0;t<e.length;t++){var r=e[t],n=r.id.name,i=r.init;this.context.setVariableFromAst(n,i)}}},i);e.exports=t=s};"function"==typeof require?require.register?require.register("ion/runtime/VariableDeclaration",e):e.call(this,module,exports,require):e.call(this)}.call(this),void function(){var e=function(e,t,r){Object.defineProperty(t,"ArrayExpression",{get:function(){return r("./ArrayExpression")},enumerable:!0}),Object.defineProperty(t,"BlockStatement",{get:function(){return r("./BlockStatement")},enumerable:!0}),Object.defineProperty(t,"CallExpression",{get:function(){return r("./CallExpression")},enumerable:!0}),Object.defineProperty(t,"ConditionalExpression",{get:function(){return r("./ConditionalExpression")},enumerable:!0}),Object.defineProperty(t,"Context",{get:function(){return r("./Context")},enumerable:!0}),Object.defineProperty(t,"DynamicExpression",{get:function(){return r("./DynamicExpression")},enumerable:!0}),Object.defineProperty(t,"Expression",{get:function(){return r("./Expression")},enumerable:!0}),Object.defineProperty(t,"ExpressionStatement",{get:function(){return r("./ExpressionStatement")},enumerable:!0}),Object.defineProperty(t,"Factory",{get:function(){return r("./Factory")},enumerable:!0}),Object.defineProperty(t,"ForInOfStatement",{get:function(){return r("./ForInOfStatement")},enumerable:!0}),Object.defineProperty(t,"IfStatement",{get:function(){return r("./IfStatement")},enumerable:!0}),Object.defineProperty(t,"Literal",{get:function(){return r("./Literal")},enumerable:!0}),Object.defineProperty(t,"MemberExpression",{get:function(){return r("./MemberExpression")},enumerable:!0}),Object.defineProperty(t,"Node",{get:function(){return r("./Node")},enumerable:!0}),Object.defineProperty(t,"ObjectExpression",{get:function(){return r("./ObjectExpression")},enumerable:!0}),Object.defineProperty(t,"OperationExpression",{get:function(){return r("./OperationExpression")},enumerable:!0}),Object.defineProperty(t,"Property",{get:function(){return r("./Property")},enumerable:!0}),Object.defineProperty(t,"ReturnStatement",{get:function(){return r("./ReturnStatement")},enumerable:!0}),Object.defineProperty(t,"Statement",{get:function(){return r("./Statement")},enumerable:!0}),Object.defineProperty(t,"Template",{get:function(){return r("./Template")},enumerable:!0}),Object.defineProperty(t,"VariableDeclaration",{get:function(){return r("./VariableDeclaration")},enumerable:!0})};"function"==typeof require?require.register?require.register("ion/runtime/index",e):e.call(this,module,exports,require):e.call(this)}.call(this);