<html>
    <head>
        <title>Ion Reactive Samples</title>
        <script src="../../lib/_browser.js"></script>
        <script type='ion'>
        # export element creation functions as global variables for convenience
        for name, fn of require('ion/browser/elements')
            global[name] = fn
        </script>
        <style>
        .description { margin: 1em; }
        .sample { background: #eeeeee; }
        </style>
    </head>
    <body>
        <div>
            <h2>Hello Sample</h2>
            <div class='description'>
            The dependent value will automatically update when focus leaves the input
            </div>
            <div class='sample'>
                <script type='ion'>
                return template ->
                    let name = input()
                        type: 'text'
                        value: 'World'
                    return div()
                        div()
                            "Name: "
                            name
                        div()
                            "Hello {{name.value}}"
                </script>
            </div>
        </div>
        <div>
            <h2>Todo Sample</h2>
            <div class='description'>
            The model is defined as global variable 'tasks'.
            Try manipulating the model from the console:
<pre>
    tasks.Beta = true
    tasks.Delta = false
    delete tasks.Alpha
</pre>
            </div>
            <div class='sample'>
                <script type='ion'>

                # we will define the model globally as tasks variable`
                # so that we can manipulate it from the developer console
                global.tasks =
                    Alpha: true
                    Beta: false
                    Charlie: false

                # now define the reactive view template
                return template ->
                    return div()
                        div()
                            "tasks: {{ JSON.stringify(tasks) }}"
                        div()
                            for name, complete of tasks
                                div()
                                    input()
                                        type: 'checkbox'
                                        checked: complete
                                        change(e) ->
                                            tasks[name] = @checked
                                    span()
                                        style:
                                            display: 'inline-block'
                                            width: '10em'
                                        name
                                    button()
                                        "\u2212"
                                        click(e) ->
                                            delete tasks[name]
                        div()
                            form()
                                let nameInput = input()
                                    width: '10em'
                                submit(e) ->
                                    e.preventDefault()
                                    let name = nameInput.value.trim()
                                    if name.length > 0
                                        tasks[name] = false
                                    nameInput.select()
                                input()
                                    type: 'checkbox'
                                    style:
                                        visibility: 'hidden'
                                span()
                                    style:
                                        display: 'inline-block'
                                        width: '10em'
                                    nameInput
                                button()
                                    type: 'submit'
                                    "+"
                </script>
            </div>
        </div>
    </body>
</html>